<!-- Sidebar and Main Content Wrapper -->
<div class="row">
    <!-- Sidebar -->
    <div id="sidebar" class="col-auto bg-dark text-white vh-100" [ngClass]="{'collapsed': isSidebarCollapsed}" style="overflow-y: auto;">
      <div class="d-flex flex-column align-items-stretch pt-3">
        <!-- Toggle Button -->
        <button class="btn btn-secondary mb-3 shadow-sm" (click)="toggleSidebar()">
          &#9776;
        </button>
 
        <!-- Button List -->
        <div class="list-group list-group-flush">
          <button class="list-group-item list-group-item-action bg-dark text-white border-0 rounded-1 shadow-sm mb-2" (click)="showForm('getAll')">
            List of All Categories
          </button>
          <button class="list-group-item list-group-item-action bg-dark text-white border-0 rounded-1 shadow-sm mb-2" (click)="showForm('getTaskCount')">
            Categories with Task Count
          </button>
          <button class="list-group-item list-group-item-action bg-dark text-white border-0 rounded-1 shadow-sm mb-2" (click)="showForm('create')">
            Create Category
          </button>
          <button class="list-group-item list-group-item-action bg-dark text-white border-0 rounded-1 shadow-sm mb-2" (click)="showForm('update')">
            Update Category
          </button>
          <button class="list-group-item list-group-item-action bg-dark text-white border-0 rounded-1 shadow-sm mb-2" (click)="showForm('delete')">
            Delete Category
          </button>
          <button class="list-group-item list-group-item-action bg-dark text-white border-0 rounded-1 shadow-sm mb-2" (click)="showForm('getById')">
            Get Category by ID
          </button>
        </div>
      </div>
    </div>
 
   <!-- Main Content Area -->
<div class="content-area col" [ngClass]="{'collapsed': isSidebarCollapsed}">
  <div class="card shadow-lg mb-4">
    <div class="card-header" style="background-color: #2d4059; color: white; text-align: center; padding: 10px; border-radius: 8px;">
      <h3 class="mb-0">Category CRUD Operations</h3>
    </div>
    <div class="card-body">
          <!-- Get Category by ID Form -->
          <form *ngIf="currentAction === 'getById'" (ngSubmit)="loadCategoryById()">
            <div class="row mb-3">
              <div class="col-md-6">
                <label for="categoryId" class="form-label">Category ID</label>
                <input
                  type="number"
                  class="form-control"
                  id="categoryId"
                  [(ngModel)]="newCategory.categoryId"
                  name="categoryId"
                  required />
              </div>
            </div>
            <div class="text-center mb-4">
              <button type="submit" class="btn btn-primary btn-lg">
                Get Category by ID
              </button>
            </div>
          </form>
 
          <!-- Create or Update Category Form -->
          <form *ngIf="currentAction === 'create' || currentAction === 'update'" (ngSubmit)="currentAction === 'create' ? addCategory() : updateCategory()">
            <div class="row mb-3">
              <div class="col-md-6">
                <label for="categoryId" class="form-label">Category ID</label>
                <input
                  type="number"
                  class="form-control"
                  id="categoryId"
                  [(ngModel)]="newCategory.categoryId"
                  name="categoryId"
                  required
                  (input)="onCategoryIdInput($event)" />
              </div>
              <div class="col-md-6">
                <label for="categoryName" class="form-label">Category Name</label>
                <input
                  type="text"
                  class="form-control"
                  id="categoryName"
                  [(ngModel)]="newCategory.categoryName"
                  name="categoryName"
                  required />
              </div>
            </div>
            <div class="text-center mb-4">
              <button type="submit" class="btn btn-success btn-lg">
                {{ currentAction === 'create' ? 'Create' : 'Update' }} Category
              </button>
            </div>
          </form>
 
          <!-- Delete Category Form -->
          <form *ngIf="currentAction === 'delete'" (ngSubmit)="deleteCategory(newCategory.categoryId)">
            <div class="row mb-3">
              <div class="col-md-6">
                <label for="categoryIdToDelete" class="form-label">Category ID</label>
                <input
                  type="number"
                  class="form-control"
                  id="categoryIdToDelete"
                  [(ngModel)]="newCategory.categoryId"
                  name="categoryId"
                  required />
              </div>
            </div>
            <div class="text-center mb-4">
              <button type="submit" class="btn btn-danger btn-lg">Delete Category</button>
            </div>
          </form>
 
          <!-- Category Task Count -->
          <div *ngIf="currentAction === 'getTaskCount'" class="mt-4">
            <table class="table table-bordered">
              <thead>
                <tr>
                  <th>Category Name</th>
                  <th>Task Count</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let entry of categoryTaskCount">
                  <td>{{ entry[0] }}</td> <!-- category -->
                  <td>{{ entry[1] }}</td> <!-- taskCount -->
                </tr>
              </tbody>
            </table>
          </div>
 
          <!-- List of Categories -->
          <div *ngIf="currentAction === 'getAll'" class="mt-4">
            <table class="table table-bordered">
              <thead>
                <tr>
                  <th>Category ID</th>
                  <th>Category Name</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let category of categories">
                  <td>{{ category.categoryId }}</td>
                  <td>{{ category.categoryName }}</td>
                </tr>
              </tbody>
            </table>
          </div>
 
          <!-- Display Category Details -->
          <div *ngIf="currentAction === 'getById' && categories.length > 0" class="mt-4">
            <h4>Category Details</h4>
            <table class="table table-bordered">
              <thead>
                <tr>
                  <th>Category ID</th>
                  <th>Category Name</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let category of categories">
                  <td>{{ category.categoryId }}</td>
                  <td>{{ category.categoryName }}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
 
  <!-- Styles -->
  <style>
    /* Sidebar Styling */
    #sidebar {
      position: fixed;
      top: 0;
      left: 0;
      bottom: 0;
      width: 250px;
      transition: width 0.3s ease;
      z-index: 1000;
    }
 
    #sidebar.collapsed {
      width: 70px;
    }
 
    #sidebar.collapsed .list-group-item {
      text-align: center;
      padding: 5px 10px;
    }
 
    #sidebar .list-group-item {
      transition: background-color 0.3s ease, transform 0.2s ease;
    }
 
    #sidebar .list-group-item:hover {
      background-color: #495057;
      transform: scale(1.05);
    }
 
    #sidebar .list-group-item.active {
      background-color: #007bff;
      color: white !important;
      font-weight: bold;
      transform: scale(1.1);
    }
 
    .content-area {
      margin-left: 250px;
      transition: margin-left 0.3s ease;
    }
 
    #sidebar.collapsed + .content-area {
      margin-left: 90px;
    }
  </style>
 
 